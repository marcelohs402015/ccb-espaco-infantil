# üôè Sistema de Gerenciamento do Espa√ßo Infantil B√≠blico - CCB

![CCB Logo](./public/ccb-logo.png)

## üìñ Para o Senhor Jesus e Deus

Este sistema foi criado com amor e dedica√ß√£o para servir √† obra do Senhor no Espa√ßo Infantil B√≠blico da Congrega√ß√£o Crist√£ no Brasil. Que este projeto possa auxiliar as irm√£s auxiliadoras no cuidado das crian√ßas durante os cultos, proporcionando seguran√ßa, organiza√ß√£o e paz para os respons√°veis e pequeninos.

> *"E disse: Deixai vir os pequeninos a mim, e n√£o os impe√ßais; porque dos tais √© o reino de Deus."*  
> **Lucas 18:16**

---

## üÜï Novidades da Vers√£o 2.0 (Branch: developing)

### üöÄ Novas Funcionalidades Implementadas:

#### üèõÔ∏è **Sistema Multi-Igreja**
Agora voc√™ pode gerenciar **m√∫ltiplas igrejas** no mesmo sistema! Cada igreja tem seus dados completamente isolados no localStorage, permitindo uso por diferentes congrega√ß√µes sem risco de misturar informa√ß√µes.

#### üìö **Hist√≥rico Completo de Cultos**
Sistema autom√°tico que registra todos os cultos realizados com palavras lidas, hinos cantados e aprendizados. Inclui estat√≠sticas e visualiza√ß√£o detalhada.

#### üìÖ **Registro de Dias de Uso**
O sistema registra automaticamente todos os dias em que foi utilizado, permitindo acompanhamento de frequ√™ncia e uso.

#### üì± **M√°scara de Celular Autom√°tica**
Formata√ß√£o autom√°tica do telefone no padr√£o brasileiro (XX) XXXXX-XXXX enquanto voc√™ digita.

#### üîÑ **Limpeza Autom√°tica de Campos**
Ao mudar a data do culto, os campos s√£o automaticamente limpos para evitar duplica√ß√£o de dados.

#### üé® **Interface Aprimorada**
Design moderno com glassmorphism, anima√ß√µes suaves e experi√™ncia de usu√°rio otimizada.

---

## üéØ Prop√≥sito do Sistema

O **Sistema de Gerenciamento do Espa√ßo Infantil B√≠blico** foi desenvolvido para auxiliar as irm√£s auxiliadoras da Congrega√ß√£o Crist√£ no Brasil no gerenciamento e cuidado das crian√ßas durante os cultos religiosos.

### Principais Objetivos:

- **Seguran√ßa**: Manter registro organizado de todas as crian√ßas presentes no espa√ßo infantil
- **Comunica√ß√£o R√°pida**: Sistema de emerg√™ncia que permite chamar rapidamente os respons√°veis quando necess√°rio
- **Organiza√ß√£o**: Controle de capacidade e informa√ß√µes essenciais de cada crian√ßa
- **Documenta√ß√£o**: Registro das atividades e ensinamentos realizados durante o culto

---

## ‚ú® Funcionalidades

### üèõÔ∏è **NOVO!** Gerenciamento Multi-Igreja
- **Cadastro de m√∫ltiplas igrejas** com ID √∫nico e nome
- **Isolamento total de dados** por igreja no localStorage
- **Seletor de igreja** intuitivo no topo da p√°gina
- **Troca r√°pida** entre igrejas via dropdown
- Cada igreja mant√©m:
  - ‚úÖ Suas pr√≥prias crian√ßas cadastradas
  - ‚úÖ Seus pr√≥prios cultos e observa√ß√µes
  - ‚úÖ Seu pr√≥prio hist√≥rico completo
  - ‚úÖ Suas pr√≥prias configura√ß√µes
  - ‚úÖ Seus pr√≥prios dias de uso
- **Gest√£o completa**: Adicionar, editar e remover igrejas
- **Preparado para Supabase**: Estrutura pronta para migra√ß√£o futura

### üìö **NOVO!** Sistema de Hist√≥rico Completo
- **Hist√≥rico de todos os cultos** j√° realizados
- **Registro autom√°tico de dias de uso** do sistema
- **Estat√≠sticas detalhadas**:
  - Total de cultos realizados
  - Total de dias que o sistema foi usado
  - M√©dia de crian√ßas por culto
- **Visualiza√ß√£o organizada** por data (mais recente primeiro)
- **Bot√£o "Ver Detalhes"** em cada culto para visualiza√ß√£o completa
- **Campos com alturas definidas** para melhor leitura:
  - Palavra Lida: 2 linhas
  - Hinos Cantados: 4 linhas
  - O que Aprenderam: 6 linhas
- **Calend√°rio visual** de dias de uso com indicadores coloridos
- **Isolado por igreja**: Cada igreja tem seu pr√≥prio hist√≥rico

### 1Ô∏è‚É£ Cadastro de Crian√ßas
- Registro completo com nome da crian√ßa
- Informa√ß√µes do respons√°vel (pai, m√£e ou outro)
- **Telefone com m√°scara autom√°tica** (XX) XXXXX-XXXX
- Campo de observa√ß√µes para informa√ß√µes importantes (alergias, cuidados especiais, etc.)
- Hor√°rio de entrada autom√°tico
- **Pesquisa por nome** da crian√ßa

### 2Ô∏è‚É£ Sistema de Emerg√™ncia
- Bot√£o de **EMERG√äNCIA** em cada card de crian√ßa
- **Alerta sonoro** autom√°tico ao acionar a emerg√™ncia
- **Alerta global** vis√≠vel em toda a tela
- Modal elegante com informa√ß√µes do respons√°vel
- Op√ß√µes para:
  - Copiar n√∫mero de telefone
  - Ligar diretamente (em dispositivos m√≥veis)
- Bot√£o de **Rechamar** caso o respons√°vel demore
- Indicador visual quando o respons√°vel foi chamado

### 3Ô∏è‚É£ Controle de Capacidade
- Configura√ß√£o de capacidade m√°xima do espa√ßo **por igreja**
- Contador em tempo real de crian√ßas presentes
- Indicadores visuais de ocupa√ß√£o:
  - üü¢ Verde: at√© 70% da capacidade
  - üü° Amarelo: 70% a 90% da capacidade
  - üî¥ Vermelho: acima de 90% da capacidade
- **Bloqueio autom√°tico** de novos cadastros quando capacidade cheia

### 4Ô∏è‚É£ Registrando Informa√ß√µes Sobre o Culto
- Data do culto
- Palavra lida e vers√≠culos estudados
- Hinos cantados durante o culto
- O que as crian√ßas aprenderam
- Exibi√ß√£o de resumo na tela principal
- **Limpeza autom√°tica de campos** ao mudar a data
- **Salvamento autom√°tico no hist√≥rico**
- Total de crian√ßas presentes registrado automaticamente

### 5Ô∏è‚É£ Gest√£o de Crian√ßas
- Visualiza√ß√£o em cards organizados
- Edi√ß√£o de informa√ß√µes das crian√ßas
- Remo√ß√£o com confirma√ß√£o de seguran√ßa
- Layout responsivo para diferentes dispositivos
- **Pesquisa em tempo real** por nome

---

## üõ†Ô∏è Tecnologias Utilizadas

### Frontend
- **Next.js 14** - Framework React com renderiza√ß√£o no servidor
- **React 18** - Biblioteca para interfaces de usu√°rio
- **TypeScript** - Tipagem est√°tica para maior seguran√ßa
- **TailwindCSS** - Framework CSS para estiliza√ß√£o moderna
- **Lucide React** - Biblioteca de √≠cones elegantes

### Gerenciamento de Estado
- **Zustand** - State management leve e eficiente
- **localStorage** - Persist√™ncia de dados no navegador

### Recursos Especiais
- **Web Audio API** - Para alertas sonoros de emerg√™ncia
- **Design Responsivo** - Funciona em celulares, tablets e computadores
- **PWA Ready** - Pode ser instalado como app no celular

---

## üöÄ Como Usar

### 1. Iniciando o Sistema pela Primeira Vez

Acesse a URL do sistema no navegador (pode ser em celular, tablet ou computador).

### 2. Cadastrando sua Igreja

**Primeira vez usando o sistema:**

1. Voc√™ ver√° um **alerta amarelo** no topo: "Nenhuma igreja cadastrada"
2. Clique no bot√£o azul **"Cadastrar Igreja"**
3. Preencha:
   - **ID da Igreja**: identificador √∫nico (ex: `ccb-bras`, `ccb-mooca-01`)
   - **Nome da Igreja**: nome completo (ex: `CCB Br√°s`, `CCB S√£o Paulo - Centro`)
4. Clique em **"Cadastrar"**
5. A igreja aparecer√° no **dropdown** do seletor
6. Selecione a igreja no dropdown
7. Pronto! Agora voc√™ pode come√ßar a usar o sistema

**Se voc√™ gerencia m√∫ltiplas igrejas:**

- Clique em **"Gerenciar Igrejas"** (bot√£o azul no seletor do topo)
- Adicione quantas igrejas precisar
- Use o **dropdown** para alternar entre elas
- Cada igreja ter√° seus dados completamente isolados

### 3. Configurando a Capacidade

1. Clique no bot√£o **"Configurar"** na se√ß√£o de capacidade
2. Defina o n√∫mero m√°ximo de crian√ßas permitidas no espa√ßo
3. Clique em **"Salvar"**
4. ‚ö†Ô∏è **Importante**: Cada igreja pode ter sua pr√≥pria capacidade m√°xima

### 4. Cadastrando uma Crian√ßa

1. Clique no bot√£o **"‚ú® Nova Crian√ßa"**
2. Preencha as informa√ß√µes:
   - Nome da crian√ßa
   - Nome do respons√°vel
   - Tipo (Pai, M√£e ou Outro)
   - **Telefone para contato** (digite s√≥ n√∫meros: `11999999999` ‚Üí formata automaticamente para `(11) 99999-9999`)
   - Observa√ß√µes importantes (opcional)
3. Clique em **"Cadastrar"**
4. A crian√ßa ser√° cadastrada **apenas na igreja selecionada**

### 5. Em Caso de Emerg√™ncia

1. Localize o card da crian√ßa
2. Clique no bot√£o vermelho **"EMERG√äNCIA"**
3. Um alerta sonoro ser√° tocado
4. **Alerta global** aparece na tela com destaque
5. Modal com op√ß√µes para:
   - **Copiar** o n√∫mero do respons√°vel
   - **Ligar** diretamente (em celulares)
6. Se necess√°rio, use o bot√£o **"Rechamar"** para repetir o processo

### 6. Editando Informa√ß√µes de uma Crian√ßa

1. No card da crian√ßa, clique no √≠cone de **l√°pis** (editar)
2. Modifique as informa√ß√µes necess√°rias
3. Clique em **"Salvar"**

### 7. Removendo uma Crian√ßa

1. No card da crian√ßa, clique no √≠cone de **lixeira**
2. Confirme a remo√ß√£o no modal que aparecer
3. A crian√ßa ser√° removida da lista **da igreja atual**

### 8. Registrando Informa√ß√µes do Culto

1. Clique no bot√£o **"üìñ Sobre o Culto"**
2. Preencha:
   - Data do culto
   - Palavra lida (vers√≠culos e mensagem)
   - Hinos cantados
   - O que as crian√ßas aprenderam
3. Clique em **"Salvar"**
4. As informa√ß√µes aparecer√£o no resumo na tela principal
5. **Autom√°tico**: Culto √© salvo no hist√≥rico da igreja

### 9. **NOVO!** Visualizando o Hist√≥rico

1. Clique no bot√£o **"üìö Ver Hist√≥rico"**
2. Veja as estat√≠sticas:
   - Total de cultos realizados
   - Total de dias de uso
   - M√©dia de crian√ßas por culto
3. **Hist√≥rico de Cultos**: Lista completa de todos os cultos
4. **Bot√£o "Ver Detalhes"**: Clique para ver informa√ß√µes completas
5. **Dias de Uso**: Calend√°rio visual de todos os dias que o sistema foi usado

### 10. **NOVO!** Alternando Entre Igrejas

1. Use o **dropdown** no seletor azul do topo
2. Selecione a igreja desejada
3. Todos os dados mudam instantaneamente para a igreja selecionada
4. Para adicionar mais igrejas: clique em **"Gerenciar Igrejas"**

### 11. Pesquisando Crian√ßas

1. Quando houver crian√ßas cadastradas, um **campo de busca** aparece
2. Digite o nome da crian√ßa
3. A lista filtra em tempo real
4. Mostra quantas crian√ßas foram encontradas

---

## üì± Deploy no Vercel

### Passo 1: Preparar o Reposit√≥rio
```bash
git add .
git commit -m "Sistema Espa√ßo Infantil CCB"
git push origin main
```

### Passo 2: Deploy no Vercel
1. Acesse [vercel.com](https://vercel.com)
2. Fa√ßa login com sua conta GitHub
3. Clique em **"New Project"**
4. Selecione o reposit√≥rio `ccb-espaco-infantil`
5. Clique em **"Deploy"**
6. Aguarde a conclus√£o do deploy (2-3 minutos)
7. Acesse a URL fornecida pelo Vercel

### Passo 3: Usar no Celular
1. Acesse a URL do Vercel no navegador do celular
2. (Opcional) Adicione √† tela inicial para acesso r√°pido:
   - **Android**: Menu > "Adicionar √† tela inicial"
   - **iOS**: Compartilhar > "Adicionar √† Tela de In√≠cio"

---

## üíæ Como Funciona a Grava√ß√£o de Dados

### Sistema de Armazenamento

Este sistema foi desenvolvido com sabedoria para ser **simples, r√°pido e seguro**. Toda a grava√ß√£o de dados acontece diretamente no **navegador** do dispositivo que voc√™ est√° usando, sem necessidade de servidores ou internet.

### üì± O que √© o localStorage?

O **localStorage** √© uma tecnologia moderna dos navegadores que permite guardar informa√ß√µes diretamente no seu dispositivo (celular, tablet ou computador). √â como um "caderninho digital" que o navegador mant√©m guardado com seguran√ßa.

### üîÑ Como os Dados S√£o Gravados?

Quando voc√™ realiza qualquer a√ß√£o no sistema, os dados s√£o salvos **automaticamente e instantaneamente**:

#### 1. **Cadastrar uma Crian√ßa** üßí
```
Voc√™ preenche o formul√°rio ‚Üí Clica em "Cadastrar" ‚Üí Sistema salva IMEDIATAMENTE no localStorage ‚Üí Crian√ßa aparece na tela
```

#### 2. **Editar Informa√ß√µes** ‚úèÔ∏è
```
Voc√™ clica em "Editar" ‚Üí Modifica os dados ‚Üí Clica em "Salvar" ‚Üí Sistema ATUALIZA no localStorage ‚Üí Mudan√ßas aparecem instantaneamente
```

#### 3. **Remover uma Crian√ßa** üóëÔ∏è
```
Voc√™ clica em "Remover" ‚Üí Confirma ‚Üí Sistema DELETA do localStorage ‚Üí Card desaparece da tela
```

#### 4. **Configurar Capacidade** ‚öôÔ∏è
```
Voc√™ define a capacidade ‚Üí Clica em "Salvar" ‚Üí Sistema GRAVA no localStorage ‚Üí Nova capacidade fica ativa
```

#### 5. **Registrar Informa√ß√µes do Culto** üìñ
```
Voc√™ preenche os dados ‚Üí Clica em "Salvar" ‚Üí Sistema ARMAZENA no localStorage ‚Üí Resumo aparece na tela
```

### üîê Tecnologia Zustand + localStorage

O sistema utiliza uma biblioteca moderna chamada **Zustand** que gerencia todos os dados e automaticamente sincroniza com o localStorage:

```typescript
// Quando voc√™ cadastra uma crian√ßa:
1. Zustand recebe os dados da crian√ßa
2. Zustand atualiza o estado da aplica√ß√£o
3. Middleware "persist" GRAVA automaticamente no localStorage
4. Tela se atualiza instantaneamente mostrando a nova crian√ßa
```

### üìä Estrutura dos Dados Salvos

Os dados s√£o organizados de forma inteligente no localStorage com **isolamento completo por igreja**:

```json
{
  "igrejas": [
    {
      "id": "ccb-bras",
      "nome": "CCB Br√°s",
      "dataCadastro": "2025-10-13T10:30:00.000Z"
    },
    {
      "id": "ccb-mooca",
      "nome": "CCB Mooca",
      "dataCadastro": "2025-10-13T11:00:00.000Z"
    }
  ],
  "igrejaAtiva": "ccb-bras",
  "dadosPorIgreja": {
    "ccb-bras": {
      "children": [
        {
          "id": "1697123456789",
          "nome": "Maria da Silva",
          "nomeResponsavel": "Jo√£o da Silva",
          "tipoResponsavel": "pai",
          "celularResponsavel": "(11) 99999-9999",
          "observacoes": "Al√©rgica a amendoim",
          "horaEntrada": "09:30"
        }
      ],
      "settings": {
        "capacidadeMaxima": 30
      },
      "cultoObservacoes": {
        "data": "2025-10-13",
        "palavraLida": "Jo√£o 3:16 - Porque Deus amou o mundo...",
        "hinosCantados": "Hino 5, Hino 12, Hino 23",
        "aprendizado": "As crian√ßas aprenderam sobre o amor de Deus"
      },
      "historicoCultos": [
        {
          "id": "1697123456789",
          "data": "2025-10-13",
          "palavraLida": "Jo√£o 3:16",
          "hinosCantados": "Hino 5, 12, 23",
          "aprendizado": "O amor de Deus",
          "totalCriancas": 15
        }
      ],
      "diasDeUso": [
        {
          "data": "2025-10-13",
          "totalCriancas": 15,
          "cultoRealizado": true
        }
      ]
    },
    "ccb-mooca": {
      "children": [...],
      "settings": {...},
      "cultoObservacoes": {...},
      "historicoCultos": [...],
      "diasDeUso": [...]
    }
  }
}
```

### ‚ö° Grava√ß√£o em Tempo Real

- ‚úÖ **Instant√¢neo**: Dados s√£o salvos em milissegundos
- ‚úÖ **Autom√°tico**: Voc√™ n√£o precisa se preocupar em "salvar"
- ‚úÖ **Confi√°vel**: Sistema garante que os dados foram gravados
- ‚úÖ **Sincronizado**: Tela sempre mostra os dados mais recentes

---

## üîí Privacidade e Seguran√ßa

### Armazenamento 100% Local e Privado

Este sistema foi desenvolvido pensando na **privacidade e seguran√ßa** das informa√ß√µes das crian√ßas:

- üîê **Todos os dados s√£o armazenados APENAS no navegador do dispositivo**
- üö´ **Nenhuma informa√ß√£o √© enviada para servidores externos**
- üîí **Nenhum dado trafega pela internet**
- üõ°Ô∏è **Os dados permanecem completamente privados e seguros**
- ‚úùÔ∏è **Prote√ß√£o divina e tecnol√≥gica para as informa√ß√µes dos pequeninos**

### Importante Saber:

#### ‚úÖ **O que PERMANECE**:
- Os dados ficam salvos mesmo se voc√™ **fechar o navegador**
- Os dados s√£o mantidos mesmo se voc√™ **atualizar a p√°gina (F5)**
- Os dados permanecem se voc√™ **desligar e ligar o dispositivo**
- Os dados ficam guardados **indefinidamente** no localStorage

#### ‚ö†Ô∏è **O que PODE ser PERDIDO**:
- Se voc√™ **limpar os dados do navegador** (Configura√ß√µes ‚Üí Limpar cache)
- Se voc√™ **desinstalar o navegador**
- Se voc√™ usar **modo an√¥nimo/privado** (dados s√£o tempor√°rios)
- Se voc√™ **resetar o dispositivo** para configura√ß√µes de f√°brica

#### ‚ÑπÔ∏è **Importante sobre M√∫ltiplos Dispositivos**:
- Cada **dispositivo** tem seus pr√≥prios dados (celular ‚â† tablet)
- Cada **navegador** tem seus pr√≥prios dados (Chrome ‚â† Firefox)
- Os dados **N√ÉO sincronizam** entre dispositivos automaticamente
- **Recomenda√ß√£o**: Use um **√∫nico dispositivo** dedicado ao Espa√ßo Infantil

### üéØ Por que localStorage?

Escolhemos o localStorage pelos seguintes motivos aben√ßoados:

1. **Simplicidade**: N√£o precisa de servidor, banco de dados ou configura√ß√µes complexas
2. **Rapidez**: Acesso instant√¢neo aos dados, sem delays
3. **Privacidade**: Dados das crian√ßas ficam seguros no dispositivo
4. **Gratuito**: Sem custos mensais de hospedagem ou banco de dados
5. **Confi√°vel**: Tecnologia madura e testada em milh√µes de sites
6. **Offline**: Funciona perfeitamente sem internet

### üìñ Para Saber Mais

Para detalhes t√©cnicos completos sobre o armazenamento, consulte o arquivo **COMO-FUNCIONA.md** que explica em profundidade toda a arquitetura do sistema.

---

## üí° Dicas de Uso

### Para Irm√£s Auxiliadoras:

1. **Mantenha o sistema aberto** durante todo o culto
2. **Cadastre as crian√ßas** assim que chegarem
3. **Use o bot√£o de emerg√™ncia** sem hesitar quando necess√°rio
4. **Preencha as observa√ß√µes** com informa√ß√µes importantes
5. **Registre o resumo do culto** ao final do dia

### Para Melhor Experi√™ncia:

- ‚ú® Use em modo paisagem (horizontal) no tablet para ver mais cards
- üì± Mantenha o celular com som ligado para ouvir os alertas
- üîã Mantenha o dispositivo carregado durante o culto
- üì∂ N√£o √© necess√°ria conex√£o com internet ap√≥s carregar a p√°gina
- üèõÔ∏è Cadastre todas as suas igrejas e alterne facilmente entre elas

---

## üõ†Ô∏è Ferramentas de Debug e Manuten√ß√£o

### Verificar/Limpar localStorage

Acesse a ferramenta de debug em:
```
http://localhost:3000/limpar-storage.html
```

**Funcionalidades da Ferramenta:**
- üìä Visualizar toda estrutura de dados do localStorage
- üîç Ver quantas igrejas est√£o cadastradas
- üìã Verificar qual igreja est√° ativa
- üóëÔ∏è Limpar TODO o localStorage (reset completo)
- ‚ö†Ô∏è √ötil para debug e resolu√ß√£o de problemas

**Quando usar:**
- Se o sistema apresentar comportamento estranho
- Se precisar come√ßar do zero
- Para verificar a integridade dos dados
- Para debug em desenvolvimento

---

## üôè Agradecimentos

### Gl√≥ria a Deus!

Este projeto √© dedicado ao **Senhor Jesus Cristo** e a **Deus Pai**, que nos deu sabedoria e capacidade para desenvolv√™-lo.

> *"Tudo o que fizerem, fa√ßam de todo o cora√ß√£o, como para o Senhor, e n√£o para os homens."*  
> **Colossenses 3:23**

### Para:
- üíù As **irm√£s auxiliadoras** que dedicam seu tempo ao cuidado das crian√ßas
- üë∂ As **crian√ßas** do Espa√ßo Infantil, que s√£o o futuro da igreja
- üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Os **pais e respons√°veis** que confiam seus pequenos aos cuidados das irm√£s
- ‚õ™ A **Congrega√ß√£o Crist√£ no Brasil**, pela obra maravilhosa que realiza

---

## üìö Documenta√ß√£o Adicional

### Arquivos de Documenta√ß√£o:

- **COMO-FUNCIONA.md**: Explica√ß√£o detalhada de como o sistema funciona tecnicamente
- **HISTORICO.md**: Documenta√ß√£o completa do sistema de hist√≥rico de cultos
- **README.md**: Este arquivo (vis√£o geral do sistema)

### Links √öteis:

- **Reposit√≥rio**: [GitHub - ccb-espaco-infantil](https://github.com/marcelohs402015/ccb-espaco-infantil)
- **Branch Stable**: `main` (vers√£o est√°vel)
- **Branch Development**: `developing` (novas funcionalidades)
- **Ferramenta Debug**: `/limpar-storage.html` (em localhost)

---

## üìû Suporte e Melhorias

Este sistema est√° em constante evolu√ß√£o. Sugest√µes de melhorias e relatos de problemas s√£o bem-vindos para que possamos servir cada vez melhor √† obra do Senhor.

### Contato:
- **Desenvolvedor**: Marcelo Hernandes
- **GitHub**: [@marcelohs402015](https://github.com/marcelohs402015)

---

<div align="center">

### ‚úùÔ∏è Que Deus aben√ßoe este trabalho e todos que o utilizam! ‚úùÔ∏è

**Desenvolvido com ‚ù§Ô∏è para a gl√≥ria de Deus**

</div>
